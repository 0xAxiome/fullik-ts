!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Fullik={})}(this,function(t){"use strict";void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n});var o=function(t){console.error(t)};function r(t,n,e){this.x=t||0,this.y=n||0,this.z=e||0}function a(t,n){this.x=t||0,this.y=n||0}function v(t,n,e,i,s,o,a,r,h){this.m00=t||1,this.m01=n||0,this.m02=e||0,this.m10=i||0,this.m11=s||1,this.m12=o||0,this.m20=a||0,this.m21=r||0,this.m22=h||1}r.prototype={constructor:r,isVector3:!0,set:function(t,n,e){return this.x=t||0,this.y=n||0,this.z=e||0,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return this.multiplyScalar(1/t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length()||1)},normalised:function(){return new r(this.x,this.y,this.z).normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},plus:function(t){return new r(this.x+t.x,this.y+t.y,this.z+t.z)},min:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},minus:function(t){return new r(this.x-t.x,this.y-t.y,this.z-t.z)},divideBy:function(t){return new r(this.x/t,this.y/t,this.z/t)},times:function(t){return t.isVector3?new r(this.x*t.x,this.y*t.y,this.z*t.z):new r(this.x*t,this.y*t,this.z*t)},randomise:function(t,n){this.x=E.rand(t,n),this.y=E.rand(t,n),this.z=E.rand(t,n)},projectOnPlane:function(t){if(!(t.length()<=0)){var n=this.normalised(),e=t.normalised();return n.minus(e.times(E.dotProduct(n,t))).normalize()}o("Plane normal cannot be a zero vector.")},cross:function(t){return new r(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},negated:function(){return new this.constructor(-this.x,-this.y,-this.z)},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},approximatelyEquals:function(t,n){if(!(n<0)){var e=Math.abs(this.x-t.x),i=Math.abs(this.y-t.y),s=Math.abs(this.z-t.z);return e<n&&i<n&&s<n}},zero:function(){return this.x=0,this.y=0,this.z=0,this}},a.prototype={constructor:a,isVector2:!0,set:function(t,n){return this.x=t||0,this.y=n||0,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return this.multiplyScalar(1/t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length()||1)},normalised:function(){return new a(this.x,this.y).normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},plus:function(t){return new a(this.x+t.x,this.y+t.y)},min:function(t){return this.x-=t.x,this.y-=t.y,this},minus:function(t){return new a(this.x-t.x,this.y-t.y)},divideBy:function(t){return new a(this.x/t,this.y/t)},times:function(t){return new a(this.x*t,this.y*t)},randomise:function(t,n){this.x=E.rand(t,n),this.y=E.rand(t,n)},projectOnPlane:function(t){if(!(t.length()<=0)){var n=this.normalised(),e=t.normalised();return n.minus(e.times(E.dotProduct(n,t))).normalize()}o("Plane normal cannot be a zero vector.")},dot:function(t,n){return this.x*t.x+this.y*t.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},negated:function(){return new this.constructor(-this.x,-this.y)},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},approximatelyEquals:function(t,n){if(!(n<0)){var e=Math.abs(this.x-t.x),i=Math.abs(this.y-t.y);return e<n&&i<n}},getSignedAngleDegsTo:function(t){var n=this.normalised(),e=t.normalised(),i=Math.acos(n.dot(e))*E.toDeg;return 1===E.zcross(n,e)?i:-i}},v.prototype={constructor:v,isMatrix3:!0,setV3:function(t,n,e){return this.m00=t.x,this.m01=t.y,this.m02=t.z,this.m10=n.x,this.m11=n.y,this.m12=n.z,this.m20=e.x,this.m21=e.y,this.m22=e.z,this},transpose:function(t){return new v(t.m00,t.m10,t.m20,t.m01,t.m11,t.m21,t.m02,t.m12,t.m22)},zero:function(){return this.m00=this.m01=this.m02=this.m10=this.m11=this.m12=this.m20=this.m21=this.m22=0,this},setIdentity:function(){return this.m00=this.m11=this.m22=1,this.m01=this.m02=this.m10=this.m12=this.m20=this.m21=0,this},determinant:function(){return this.m20*this.m01*this.m12-this.m20*this.m02*this.m11-this.m10*this.m01*this.m22+this.m10*this.m02*this.m21+this.m00*this.m11*this.m22-this.m00*this.m12*this.m21},times:function(t){if(t.isVector3)return new r(this.m00*t.x+this.m10*t.y+this.m20*t.z,this.m01*t.x+this.m11*t.y+this.m21*t.z,this.m02*t.x+this.m12*t.y+this.m22*t.z);if(t.isMatrix3){var n=new v;return n.m00=this.m00*t.m00+this.m10*t.m01+this.m20*t.m02,n.m01=this.m01*t.m00+this.m11*t.m01+this.m21*t.m02,n.m02=this.m02*t.m00+this.m12*t.m01+this.m22*t.m02,n.m10=this.m00*t.m10+this.m10*t.m11+this.m20*t.m12,n.m11=this.m01*t.m10+this.m11*t.m11+this.m21*t.m12,n.m12=this.m02*t.m10+this.m12*t.m11+this.m22*t.m12,n.m20=this.m00*t.m20+this.m10*t.m21+this.m20*t.m22,n.m21=this.m01*t.m20+this.m11*t.m21+this.m21*t.m22,n.m22=this.m02*t.m20+this.m12*t.m21+this.m22*t.m22,n}},isOrthogonal:function(){var t=E.dotProduct(this.getXBasis(),this.getYBasis()),n=E.dotProduct(this.getXBasis(),this.getZBasis()),e=E.dotProduct(this.getYBasis(),this.getZBasis());return!!(E.nearEquals(t,0,.01)&&E.nearEquals(n,0,.01)&&E.nearEquals(e,0,.01))},inverse:function(t){var n=1/t.determinant(),e=new v;return e.m00=(t.m11*t.m22-t.m12*t.m21)*n,e.m01=-(t.m01*t.m22-t.m02*t.m21)*n,e.m02=(t.m01*t.m12-t.m02*t.m11)*n,e.m10=-(-t.m20*t.m12+t.m10*t.m22)*n,e.m11=(-t.m20*t.m02+t.m00*t.m22)*n,e.m12=-(-t.m10*t.m02+t.m00*t.m12)*n,e.m20=(-t.m20*t.m11+t.m10*t.m21)*n,e.m21=-(-t.m20*t.m01+t.m00*t.m21)*n,e.m22=(-t.m10*t.m02+t.m00*t.m11)*n,e},rotateRads:function(t,n){var e=new v,i=Math.sin(n),s=Math.cos(n),o=1-s,a=t.x*t.y,r=t.y*t.z,h=t.x*t.z,c=t.x*i,m=t.y*i,u=t.z*i,g=t.x*t.x*o+s,l=a*o+u,f=h*o-m,d=a*o-u,C=t.y*t.y*o+s,B=r*o+c,L=h*o+m,y=r*o-c,x=t.z*t.z*o+s,A=this.m00*g+this.m10*l+this.m20*f,E=this.m01*g+this.m11*l+this.m21*f,p=this.m02*g+this.m12*l+this.m22*f,w=this.m00*d+this.m10*C+this.m20*B,D=this.m01*d+this.m11*C+this.m21*B,b=this.m02*d+this.m12*C+this.m22*B;return e.m20=this.m00*L+this.m10*y+this.m20*x,e.m21=this.m01*L+this.m11*y+this.m21*x,e.m22=this.m02*L+this.m12*y+this.m22*x,e.m00=A,e.m01=E,e.m02=p,e.m10=w,e.m11=D,e.m12=b,e},rotateDegs:function(t,n){return this.rotateRads(n,t*E.toRad)},setXBasis:function(t){this.m00=t.x,this.m01=t.y,this.m02=t.z},setYBasis:function(t){this.m10=t.x,this.m11=t.y,this.m12=t.z},setZBasis:function(t){this.m20=t.x,this.m21=t.y,this.m22=t.z},getXBasis:function(){return new r(this.m00,this.m01,this.m02)},getYBasis:function(){return new r(this.m10,this.m11,this.m12)},getZBasis:function(){return new r(this.m20,this.m21,this.m22)}};var E={MIN_ANGLE_DEGS:0,MAX_ANGLE_DEGS:180,MAX_VALUE:1/0,PRECISION:.001,PRECISION_DEG:.01,toRad:Math.PI/180,toDeg:180/Math.PI,clamp:function(t,n,e){return t=e<(t=t<n?n:t)?e:t},lerp:function(t,n,e){return(1-e)*t+e*n},rand:function(t,n){return t+Math.random()*(n-t)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},nearEquals:function(t,n,e){return Math.abs(t-n)<=e},sign:function(t){return 0<=t?1:-1},radtodeg:function(t){return t*E.toDeg},degtorad:function(t){return t*E.toRad},cot:function(t){return 1/Math.tan(t)},perpendicular:function(t,n){return!!E.nearEquals(E.dotProduct(t,n),0,.01)},scalarProduct:function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},dotProduct:function(t,n){var e=t.normalised(),i=n.normalised();return e.x*i.x+e.y*i.y+e.z*i.z},crossProduct:function(t,n){return new r(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)},genPerpendicularVectorQuick:function(t){return(Math.abs(t.y)<.99?new r(-t.z,0,t.x):new r(0,t.z,-t.y)).normalize()},genPerpendicularVectorHM:function(t){var n=E.absV3(t);return n.x<=n.y&&n.x<=n.z?new r(0,-t.z,t.y).normalize():n.y<=n.x&&n.y<=n.z?new r(-t.z,0,t.x).normalize():new r(-t.y,t.x,0).normalize()},genPerpendicularVectorFrisvad:function(t){if(t.z<-.9999999)return new r(0,-1,0);var n=1/(1+t.z);return new r(1-t.x*t.x*n,-t.x*t.y*n,-t.x).normalize()},getUvBetween:function(t,n){return(new r).copy(n.minus(t)).normalize()},absV3:function(t){return new r(t.x<0?-t.x:t.x,t.y<0?-t.y:t.y,t.z<0?-t.z:t.z)},getAngleBetweenRads:function(t,n){return Math.acos(E.dotProduct(t,n))},getAngleBetweenDegs:function(t,n){return E.getAngleBetweenRads(t,n)*E.toDeg},getSignedAngleBetweenDegs:function(t,n,e){return E.getAngleBetweenDegs(t,n)*E.sign(E.dotProduct(E.crossProduct(t,n),e))},getDirectionUV:function(t,n){return n.minus(t).normalize()},rotateAboutAxisDegs:function(t,n,e){return E.rotateAboutAxisRads(t,n*E.toRad,e)},rotateAboutAxisRads:function(t,n,e){var i=new v,s=Math.sin(n),o=Math.cos(n),a=1-o,r=e.x*e.y*a,h=e.x*e.z*a,c=e.y*e.z*a;return i.m00=e.x*e.x*a+o,i.m01=r+e.z*s,i.m02=h-e.y*s,i.m10=r-e.z*s,i.m11=e.y*e.y*a+o,i.m12=c+e.x*s,i.m20=h+e.y*s,i.m21=c-e.x*s,i.m22=e.z*e.z*a+o,i.times(t)},rotateXDegs:function(t,n){return E.rotateXRads(t,n*E.toRad)},rotateYDegs:function(t,n){return E.rotateYRads(t,n*E.toRad)},rotateZDegs:function(t,n){return E.rotateZRads(t,n*E.toRad)},rotateXRads:function(t,n){var e=Math.cos(n),i=Math.sin(n);return new r(t.x,t.y*e-t.z*i,t.y*i+t.z*e)},rotateYRads:function(t,n){var e=Math.cos(n),i=Math.sin(n);return new r(t.z*i+t.x*e,t.y,t.z*e-t.x*i)},rotateZRads:function(t,n){var e=Math.cos(n),i=Math.sin(n);return new r(t.x*e-t.y*i,t.x*i+t.y*e,t.z)},getAngleLimitedUnitVectorDegs:function(t,n,e){if(e<E.getAngleBetweenDegs(n,t)){var i=E.crossProduct(n.normalised(),t.normalised()).normalize();return E.rotateAboutAxisDegs(n,e,i).normalize()}return t.normalised()},withinManhattanDistance:function(t,n,e){return!(Math.abs(n.x-t.x)>e)&&(!(Math.abs(n.y-t.y)>e)&&!(Math.abs(n.z-t.z)>e))},manhattanDistanceBetween:function(t,n){return Math.abs(n.x-t.x)+Math.abs(n.x-t.x)+Math.abs(n.x-t.x)},distanceBetween:function(t,n){var e=n.x-t.x,i=n.y-t.y,s=void 0!==t.z?n.z-t.z:0;return Math.sqrt(e*e+i*i+s*s)},createRotationMatrix:function(t){var n,e,i=t.normalised();if(t.z<-.9999999)n=new r(1,0,0),e=new r(0,1,0);else{var s=1/(1+i.z),o=-i.x*i.y*s;n=new r(1-i.x*i.x*s,o,-i.x).normalize(),e=new r(o,1-i.y*i.y*s,-i.y).normalize()}var a=new v;return a.setV3(n,e,i),a},getUnsignedAngleBetweenVectorsDegs:function(t,n){Math.acos(t.normalised().dot(n.normalised())),this.toDeg},zcross:function(t,n){var e=t.x*n.y-n.x*t.y;return 0<e?1:e<0?-1:0},getConstrainedUV:function(t,n,e,i){var s=n.getSignedAngleDegsTo(t);return i<s?this.rotateDegs(n,i):s<-e?this.rotateDegs(n,-e):t},rotateRads:function(t,n){var e=Math.cos(n),i=Math.sin(n);return new a(t.x*e-t.y*i,t.x*i+t.y*e)},rotateDegs:function(t,n){return this.rotateRads(t,n*this.toRad)},validateDirectionUV:function(t){if(t.length()<0)throw new Error("vector direction unit vector cannot be zero.")},validateLength:function(t){if(t<0)throw new Error("Length must be a greater than or equal to zero.")}},p=10,w=11,D=12,b=1,h=21;function c(){this.mRotorConstraintDegs=E.MAX_ANGLE_DEGS,this.mHingeClockwiseConstraintDegs=E.MAX_ANGLE_DEGS,this.mHingeAnticlockwiseConstraintDegs=E.MAX_ANGLE_DEGS,this.mRotationAxisUV=new r,this.mReferenceAxisUV=new r,this.type=p}function m(t,n,e,i,s){this.mJoint=new c,this.mStartLocation=new r,this.mEndLocation=new r,this.mBoneConnectionPoint="end",this.mLength=0,this.color=s||16777215,this.name="",this.init(t,n,e,i)}function n(t){this.bones=[],this.name="",this.color=t||16777215,this.mSolveDistanceThreshold=1,this.mMaxIterationAttempts=20,this.mMinIterationChange=.01,this.mChainLength=0,this.bonesLength=0,this.mNumBones=0,this.mFixedBaseLocation=new r,this.mFixedBaseMode=!0,this.mBaseboneConstraintType=b,this.mBaseboneConstraintUV=new r,this.mBaseboneRelativeConstraintUV=new r,this.mBaseboneRelativeReferenceConstraintUV=new r,this.mLastTargetLocation=new r(E.MAX_VALUE,E.MAX_VALUE,E.MAX_VALUE),this.mLastBaseLocation=new r(E.MAX_VALUE,E.MAX_VALUE,E.MAX_VALUE),this.mCurrentSolveDistance=E.MAX_VALUE,this.mConnectedChainNumber=-1,this.mConnectedBoneNumber=-1,this.mEmbeddedTarget=new r,this.mUseEmbeddedTarget=!1}function e(t){this.chains=[],this.meshChains=[],this.targets=[],this.mNumChains=0,this.scene=t,this.isWithMesh=!1}function u(t,n){this.mClockwiseConstraintDegs=t||E.MAX_ANGLE_DEGS,this.mAnticlockwiseConstraintDegs=n||E.MAX_ANGLE_DEGS}function i(t,n,e,i,s){this.mJoint=new u,this.mStartLocation=new a,this.mEndLocation=new a,this.mBoneConnectionPoint=h,this.mLength=0,this.color=s||16777215,this.name="",this.init(t,n,e,i)}function s(t){this.UP=new a(0,1),this.mFixedBaseMode=!0,this.chains=[],this.meshChains=[],this.targets=[],this.mNumChains=0,this.scene=t,this.isWithMesh=!1}c.prototype={constructor:c,clone:function(){var t=new c;return t.mRotorConstraintDegs=this.mRotorConstraintDegs,t.mHingeClockwiseConstraintDegs=this.mHingeClockwiseConstraintDegs,t.mHingeAnticlockwiseConstraintDegs=this.mHingeAnticlockwiseConstraintDegs,t.type=this.type,t.mRotationAxisUV.copy(this.mRotationAxisUV),t.mReferenceAxisUV.copy(this.mReferenceAxisUV),t},validateAngle:function(t){return t<E.MIN_ANGLE_DEGS&&(t=E.MIN_ANGLE_DEGS,console.log("! min angle is "+E.MIN_ANGLE_DEGS)),t>E.MAX_ANGLE_DEGS&&(t=E.MAX_ANGLE_DEGS,console.log("! max angle is "+E.MAX_ANGLE_DEGS)),t},setAsBallJoint:function(t){this.mRotorConstraintDegs=this.validateAngle(t),this.type=p},setHinge:function(t,n,e,i,s){this.type=t,this.mHingeClockwiseConstraintDegs=this.validateAngle(e),this.mHingeAnticlockwiseConstraintDegs=this.validateAngle(i),this.mRotationAxisUV.copy(n.normalised()),this.mReferenceAxisUV.copy(s.normalised())},getJointType:function(){return this.type},getHingeClockwiseConstraintDegs:function(){if(this.type!==p)return this.mHingeClockwiseConstraintDegs},getHingeAnticlockwiseConstraintDegs:function(){if(this.type!==p)return this.mHingeAnticlockwiseConstraintDegs},getHingeReferenceAxis:function(){if(this.type!==p)return this.mReferenceAxisUV},getHingeRotationAxis:function(){if(this.type!==p)return this.mRotationAxisUV},getBallJointConstraintDegs:function(){if(this.type===p)return this.mRotorConstraintDegs},setAsGlobalHinge:function(t,n,e,i){this.setHinge(w,t,n,e,i)},setAsLocalHinge:function(t,n,e,i){this.setHinge(D,t,n,e,i)},setBallJointConstraintDegs:function(t){this.type===p&&(this.mRotorConstraintDegs=this.validateAngle(t))},setHingeJointClockwiseConstraintDegs:function(t){this.type!==p&&(this.mHingeClockwiseConstraintDegs=this.validateAngle(t))},setHingeJointAnticlockwiseConstraintDegs:function(t){this.type!==p&&(this.mHingeAnticlockwiseConstraintDegs=this.validateAngle(t))},setHingeRotationAxis:function(t){this.type!==p&&this.mRotationAxisUV.copy(t.normalised())},setHingeReferenceAxis:function(t){this.type!==p&&this.mReferenceAxisUV.copy(t.normalised())}},m.prototype={constructor:m,init:function(t,n,e,i){this.setStartLocation(t),void 0!==n?(this.setEndLocation(n),this.setLength(E.distanceBetween(this.mStartLocation,this.mEndLocation))):(this.setLength(i),this.setEndLocation(this.mStartLocation.plus(e.normalised().times(i))))},clone:function(){var t=new m(this.mStartLocation,this.mEndLocation);return t.mJoint=this.mJoint.clone(),t},length:function(){return this.mLength},liveLength:function(){return E.distanceBetween(this.mStartLocation,this.mEndLocation)},setName:function(t){this.name=t},setColor:function(t){this.color=t},setBoneConnectionPoint:function(t){this.mBoneConnectionPoint=t},setHingeJointClockwiseConstraintDegs:function(t){this.mJoint.setHingeJointClockwiseConstraintDegs(t)},setHingeJointAnticlockwiseConstraintDegs:function(t){this.mJoint.setHingeJointAnticlockwiseConstraintDegs(t)},setBallJointConstraintDegs:function(t){t<0&&(t=0),180<t&&(t=180),this.mJoint.setBallJointConstraintDegs(t)},setStartLocation:function(t){this.mStartLocation.copy(t)},setEndLocation:function(t){this.mEndLocation.copy(t)},setLength:function(t){0<t&&(this.mLength=t)},setJoint:function(t){this.mJoint=t},getHingeJointClockwiseConstraintDegs:function(){return this.mJoint.getHingeClockwiseConstraintDegs()},getHingeJointAnticlockwiseConstraintDegs:function(){return this.mJoint.getHingeAnticlockwiseConstraintDegs()},getBallJointConstraintDegs:function(){return this.mJoint.getBallJointConstraintDegs()},getBoneConnectionPoint:function(){return this.mBoneConnectionPoint},getDirectionUV:function(){return E.getDirectionUV(this.mStartLocation,this.mEndLocation)},getStartLocation:function(){return this.mStartLocation},getEndLocation:function(){return this.mEndLocation},getJointType:function(){return this.mJoint.getJointType()},getLength:function(){return this.mLength},getJoint:function(){return this.mJoint}},n.prototype={constructor:n,clone:function(){var t=new n;return t.bones=this.cloneIkChain(),t.mFixedBaseLocation.copy(this.mFixedBaseLocation),t.mLastTargetLocation.copy(this.mLastTargetLocation),t.mLastBaseLocation.copy(this.mLastBaseLocation),this.mBaseboneConstraintType!==b&&(t.mBaseboneConstraintUV.copy(this.mBaseboneConstraintUV),t.mBaseboneRelativeConstraintUV.copy(this.mBaseboneRelativeConstraintUV)),t.bonesLength=this.bonesLength,t.mNumBones=this.mNumBones,t.mCurrentSolveDistance=this.mCurrentSolveDistance,t.mConnectedChainNumber=this.mConnectedChainNumber,t.mConnectedBoneNumber=this.mConnectedBoneNumber,t.mBaseboneConstraintType=this.mBaseboneConstraintType,t.color=this.color,t},clear:function(){for(var t=this.mNumBones;t--;)this.removeBone(t);this.mNumBones=0},addBone:function(t){t.setColor(this.color),this.bones.push(t),this.mNumBones++,1===this.mNumBones&&(this.mFixedBaseLocation.copy(t.getStartLocation()),this.mBaseboneConstraintUV.copy(t.getDirectionUV())),this.updateChainLength()},removeBone:function(t){t<this.mNumBones&&(this.bones.splice(t,1),this.mNumBones--,this.updateChainLength())},addConsecutiveBone:function(t,n){if(0<this.mNumBones){var e=this.bones[this.mNumBones-1].getEndLocation();this.addBone(new m(e,void 0,t.normalised(),n))}},addConsecutiveFreelyRotatingHingedBone:function(t,n,e,i){this.addConsecutiveHingedBone(t,n,e,i,180,180,E.genPerpendicularVectorQuick(i))},addConsecutiveHingedBone:function(t,n,e,i,s,o,a){if(0!==this.mNumBones){t=t.normalised(),i=i.normalised();var r=new m(this.bones[this.mNumBones-1].getEndLocation(),void 0,t,n,this.color);e=e||"global";var h=new c;switch(e){case"global":h.setAsGlobalHinge(i,s,o,a);break;case"local":h.setAsLocalHinge(i,s,o,a)}r.setJoint(h),this.addBone(r)}},addConsecutiveRotorConstrainedBone:function(t,n,e){if(0!==this.mNumBones){t=t.normalised();var i=new m(this.bones[this.mNumBones-1].getEndLocation(),void 0,t,n);i.setBallJointConstraintDegs(e),this.addBone(i)}},connectToStructure:function(t,n,e){t.getNumChains()<n||(t.getChain(n).getNumBones()<e||(this.mConnectedChainNumber=n,this.mConnectedBoneNumber=e))},getBaseboneConstraintType:function(){return this.mBaseboneConstraintType},getBaseboneConstraintUV:function(){if(this.mBaseboneConstraintType!==b)return this.mBaseboneConstraintUV},getBaseLocation:function(){return this.bones[0].getStartLocation()},getBone:function(t){return this.bones[t]},getChain:function(){return this.bones},getChainLength:function(){return this.bonesLength},getConnectedBoneNumber:function(){return this.mConnectedBoneNumber},getConnectedChainNumber:function(){return this.mConnectedChainNumber},getEffectorLocation:function(){return this.bones[this.mNumBones-1].getEndLocation()},getLastTargetLocation:function(){return this.mLastTargetLocation},getLiveChainLength:function(){for(var t=0,n=0;n<this.mNumBones;n++)t+=this.bones[n].liveLength();return t},getName:function(){return this.name},getNumBones:function(){return this.mNumBones},getBaseboneRelativeReferenceConstraintUV:function(){return this.mBaseboneRelativeReferenceConstraintUV},setColor:function(t){this.color=t;for(var n=0;n<this.mNumBones;n++)this.bones[n].setColor(t)},setBaseboneRelativeConstraintUV:function(t){this.mBaseboneRelativeConstraintUV=t},setBaseboneRelativeReferenceConstraintUV:function(t){this.mBaseboneRelativeReferenceConstraintUV=t},setRotorBaseboneConstraint:function(t,n,e){0!==this.mNumBones&&0<n.length()&&(E.clamp(e,0,180),t=t||"global",this.mBaseboneConstraintType="global"===t?2:4,this.mBaseboneConstraintUV=n.normalised(),this.mBaseboneRelativeConstraintUV.copy(this.mBaseboneConstraintUV),this.getBone(0).getJoint().setAsBallJoint(e))},setHingeBaseboneConstraint:function(t,n,e,i,s){0===this.mNumBones&&o("Chain must contain a basebone before we can specify the basebone constraint type.")},setFreelyRotatingGlobalHingedBasebone:function(t){this.setHingeBaseboneConstraint(3,t,180,180,E.genPerpendicularVectorQuick(t))},setFreelyRotatingLocalHingedBasebone:function(t){this.setHingeBaseboneConstraint(5,t,180,180,E.genPerpendicularVectorQuick(t))},setLocalHingedBasebone:function(t,n,e,i){this.setHingeBaseboneConstraint(5,t,n,e,i)},setGlobalHingedBasebone:function(t,n,e,i){this.setHingeBaseboneConstraint(3,t,n,e,i)},setBaseboneConstraintUV:function(t){this.mBaseboneConstraintType!==b&&(this.constraintUV.normalize(),this.mBaseboneConstraintUV.copy(t))},setBaseLocation:function(t){this.mFixedBaseLocation.copy(t)},setChain:function(t){this.bones=[];for(var n=t.length,e=0;e<n;e++)this.bones[e]=t[e]},setFixedBaseMode:function(t){(t||-1===this.mConnectedChainNumber)&&(2!==this.mBaseboneConstraintType||t)&&(this.mFixedBaseMode=t)},setMaxIterationAttempts:function(t){t<1||(this.mMaxIterationAttempts=t)},setMinIterationChange:function(t){t<0||(this.mMinIterationChange=t)},setSolveDistanceThreshold:function(t){t<0||(this.mSolveDistanceThreshold=t)},resetTarget:function(){this.mLastBaseLocation=new r(E.MAX_VALUE,E.MAX_VALUE,E.MAX_VALUE),this.mCurrentSolveDistance=E.MAX_VALUE},updateTarget:function(t){var n=new r(t.x,t.y,t.z);if(this.mLastTargetLocation.approximatelyEquals(n,.001)&&this.mLastBaseLocation.approximatelyEquals(this.getBaseLocation(),.001))return this.mCurrentSolveDistance;for(var e,i=[],s=E.MAX_VALUE,o=E.MAX_VALUE,a=0;a<this.mMaxIterationAttempts;a++){if((e=this.solveIK(n))<s){if(s=e,i=this.cloneIkChain(),e<this.mSolveDistanceThreshold)break}else if(Math.abs(e-o)<this.mMinIterationChange)break;o=e}return this.mCurrentSolveDistance=s,this.bones=i,this.mLastBaseLocation.copy(this.getBaseLocation()),this.mLastTargetLocation.copy(n),this.mCurrentSolveDistance},solveIK:function(t){if(0!==this.mNumBones){for(var n,e,i,s,o=this.mNumBones;o--;)if(e=(n=this.bones[o]).getLength(),i=n.getJoint(),s=n.getJointType(),o!==this.mNumBones-1){var a=this.bones[o+1].getDirectionUV().negated(),r=n.getDirectionUV().negated();if(s===p){var h=E.getAngleBetweenDegs(a,r);(x=i.getBallJointConstraintDegs())<h&&(r=E.getAngleLimitedUnitVectorDegs(r,a,x))}else if(s===w)r=r.projectOnPlane(i.getHingeRotationAxis());else if(s===D){m=0<o?(B=E.createRotationMatrix(this.bones[o-1].getDirectionUV())).times(i.getHingeRotationAxis()).normalize():this.mBaseboneRelativeConstraintUV.clone(),r=r.projectOnPlane(m)}var c=n.getEndLocation().plus(r.times(e));n.setStartLocation(c),0<o&&this.bones[o-1].setEndLocation(c)}else{n.setEndLocation(t);r=n.getDirectionUV().negated();switch(s){case p:break;case w:r=r.projectOnPlane(i.getHingeRotationAxis());break;case D:var m=(B=E.createRotationMatrix(this.bones[o-1].getDirectionUV())).times(i.getHingeRotationAxis()).normalize();r=r.projectOnPlane(m)}c=t.plus(r.times(e));n.setStartLocation(c),0<o&&this.bones[o-1].setEndLocation(c)}for(o=0;o<this.mNumBones;o++)if(e=(n=this.bones[o]).getLength(),0!==o){var u=n.getDirectionUV(),g=this.bones[o-1].getDirectionUV();if((s=(i=n.getJoint()).getJointType())===p){h=E.getAngleBetweenDegs(g,u);(x=i.getBallJointConstraintDegs())<h&&(u=E.getAngleLimitedUnitVectorDegs(u,g,x))}else if(s===w){var l=i.getHingeRotationAxis();u=u.projectOnPlane(l).normalize();var f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs();if(!E.nearEquals(f,-E.MAX_ANGLE_DEGS,E.PRECISION)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION)){var C=i.getHingeReferenceAxis();d<(A=E.getSignedAngleBetweenDegs(C,u,l))?u=E.rotateAboutAxisDegs(C,d,l).normalised():A<f&&(u=E.rotateAboutAxisDegs(C,f,l).normalised())}}else if(s===D){var B;l=i.getHingeRotationAxis(),m=(B=E.createRotationMatrix(g)).times(l).normalize();u=u.projectOnPlane(m);f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs();if(!E.nearEquals(f,-E.MAX_ANGLE_DEGS,E.PRECISION)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION)){var L=B.times(i.getHingeReferenceAxis()).normalize();d<(A=E.getSignedAngleBetweenDegs(L,u,m))?u=E.rotateAboutAxisDegs(L,d,m).normalize():A<f&&(u=E.rotateAboutAxisDegs(L,f,m).normalize())}}var y=n.getStartLocation().plus(u.times(e));n.setEndLocation(y),o<this.mNumBones-1&&this.bones[o+1].setStartLocation(y)}else if(this.mFixedBaseMode?n.setStartLocation(this.mFixedBaseLocation):n.setStartLocation(n.getEndLocation().minus(n.getDirectionUV().times(e))),this.mBaseboneConstraintType===b){y=n.getStartLocation().plus(n.getDirectionUV().times(e));n.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(2===this.mBaseboneConstraintType){u=n.getDirectionUV(),h=E.getAngleBetweenDegs(this.mBaseboneConstraintUV,u);(x=n.getBallJointConstraintDegs())<h&&(u=E.getAngleLimitedUnitVectorDegs(u,this.mBaseboneConstraintUV,x));y=n.getStartLocation().plus(u.times(e));n.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(4===this.mBaseboneConstraintType){var x;u=n.getDirectionUV(),h=E.getAngleBetweenDegs(this.mBaseboneRelativeConstraintUV,u);(x=n.getBallJointConstraintDegs())<h&&(u=E.getAngleLimitedUnitVectorDegs(u,this.mBaseboneRelativeConstraintUV,x));y=n.getStartLocation().plus(u.times(e));n.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(3===this.mBaseboneConstraintType){l=(i=n.getJoint()).getHingeRotationAxis(),f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs(),u=n.getDirectionUV().projectOnPlane(l).normalize();if(!E.nearEquals(f,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)){C=i.getHingeReferenceAxis();d<(A=E.getSignedAngleBetweenDegs(C,u,l))?u=E.rotateAboutAxisDegs(C,d,l).normalize():A<f&&(u=E.rotateAboutAxisDegs(C,f,l).normalize())}y=n.getStartLocation().plus(u.times(e));n.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(5===this.mBaseboneConstraintType){i=n.getJoint();l=this.mBaseboneRelativeConstraintUV,f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs(),u=n.getDirectionUV().projectOnPlane(l);if(!E.nearEquals(f,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)){var A;C=this.mBaseboneRelativeReferenceConstraintUV;d<(A=E.getSignedAngleBetweenDegs(C,u,l))?u=E.rotateAboutAxisDegs(C,d,l).normalize():A<f&&(u=E.rotateAboutAxisDegs(C,f,l).normalize())}y=n.getStartLocation().plus(u.times(e));n.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}return this.mLastTargetLocation.copy(t),E.distanceBetween(this.bones[this.mNumBones-1].getEndLocation(),t)}},updateChainLength:function(){this.bonesLength=0;for(var t=this.mNumBones;t--;)this.bonesLength+=this.bones[t].getLength()},cloneIkChain:function(){for(var t=this.bones.length,n=[],e=0;e<t;e++)n.push(this.bones[e].clone());return n}},e.prototype={constructor:e,update:function(){for(var t,n,e,i,s,o,a,r=0;r<this.mNumChains;r++){if(t=this.chains[r],n=this.meshChains[r],i=this.targets[r],-1===(s=t.getConnectedChainNumber()))t.updateTarget(i);else{switch(o=this.chains[s].getBone(t.getConnectedBoneNumber()),t.setBaseLocation("start"===o.getBoneConnectionPoint()?o.getStartLocation():o.getEndLocation()),a=t.getBaseboneConstraintType()){case b:case 2:case 3:break;case 4:case 5:var h=E.createRotationMatrix(o.getDirectionUV()),c=h.times(t.getBaseboneConstraintUV()).normalize();t.setBaseboneRelativeConstraintUV(c),5===a&&t.setBaseboneRelativeReferenceConstraintUV(h.times(t.getBone(0).getJoint().getHingeReferenceAxis()))}t.resetTarget(),t.updateTarget(i)}if(this.isWithMesh)for(var m=0;m<t.mNumBones;m++)e=t.getBone(m),n[m].position.copy(e.getStartLocation()),n[m].lookAt(e.getEndLocation())}},clear:function(){var t;for(this.clearAllBoneMesh(),t=this.mNumChains;t--;)this.remove(t);this.chains=[],this.meshChains=[],this.targets=[]},add:function(t,n,e){this.chains.push(t),this.targets.push(n),this.mNumChains++,e&&this.addChainMeshs(t)},remove:function(t){this.chains[t].clear(),this.chains.splice(t,1),this.meshChains.splice(t,1),this.targets.splice(t,1),this.mNumChains--},setFixedBaseMode:function(t){for(var n=0;n<this.mNumChains;n++)this.chains[n].setFixedBaseMode(t)},getNumChains:function(){return this.mNumChains},getChain:function(t){return this.chains[t]},connectChain:function(t,n,e,i,s,o,a){if(!(n>this.mNumChains||e>this.chains[n].getNumBones())){var r,h=t.clone();void 0!==a&&h.setColor(a),h.connectToStructure(this,n,e),r="start"===(i||this.getChain(n).getBone(e).getBoneConnectionPoint())?this.chains[n].getBone(e).getStartLocation():this.chains[n].getBone(e).getEndLocation(),h.setBaseLocation(r),h.setFixedBaseMode(!0);for(var c=0;c<h.getNumBones();c++){var m=h.getBone(c).getStartLocation(),u=h.getBone(c).getEndLocation(),g=m.plus(r),l=u.plus(r);h.getBone(c).setStartLocation(g),h.getBone(c).setEndLocation(l)}this.add(h,s,o)}},addChainMeshs:function(t,n){this.isWithMesh=!0;for(var e=[],i=t.bones.length,s=0;s<i;s++)e.push(this.addBoneMesh(t.bones[s]));this.meshChains.push(e)},addBoneMesh:function(t){var n=t.mLength,e=t.color,i=new THREE.CylinderBufferGeometry(1,.5,n,4);i.applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),i.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,.5*n));var s,o=new THREE.MeshStandardMaterial({color:e,wireframe:!1,shadowSide:!1}),a=new THREE.MeshBasicMaterial({wireframe:!0}),r=null;switch(t.getJoint().type){case p:if(a.color.setHex(16737792),180===t.getJoint().mRotorConstraintDegs)break;var h=n/4,c=2;(s=new THREE.CylinderBufferGeometry(0,c,h,6)).applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),s.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,.5*h)),r=new THREE.Mesh(s,a);break;case w:var m=t.getJoint().mHingeClockwiseConstraintDegs*E.toRad,u=t.getJoint().mHingeAnticlockwiseConstraintDegs*E.toRad;c=2;a.color.setHex(16776960),(s=new THREE.CircleBufferGeometry(c,12,m,m+u)).applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),r=new THREE.Mesh(s,a);break;case D:c=2,m=t.getJoint().mHingeClockwiseConstraintDegs*E.toRad,u=t.getJoint().mHingeAnticlockwiseConstraintDegs*E.toRad;a.color.setHex(65535),(s=new THREE.CircleBufferGeometry(c,12,m,m+u)).applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),r=new THREE.Mesh(s,a)}var g=new THREE.Mesh(i,o);return this.scene.add(g),g.castShadow=!0,g.receiveShadow=!0,null!==r&&g.add(r),g},clearAllBoneMesh:function(){if(this.isWithMesh){var t,n,e;for(t=this.meshChains.length;t--;){for(n=this.meshChains[t].length;n--;)e=this.meshChains[t][n],this.scene.remove(e),e.geometry.dispose(),e.material.dispose();this.meshChains[t]=[]}this.meshChains=[]}}},u.prototype={constructor:u,clone:function(){var t=new u;return t.mClockwiseConstraintDegs=this.mClockwiseConstraintDegs,t.mAnticlockwiseConstraintDegs=this.mAnticlockwiseConstraintDegs,t},validateAngle:function(t){return t<E.MIN_ANGLE_DEGS&&(t=E.MIN_ANGLE_DEGS,console.log("! min angle is "+E.MIN_ANGLE_DEGS)),t>E.MAX_ANGLE_DEGS&&(t=E.MAX_ANGLE_DEGS,console.log("! max angle is "+E.MAX_ANGLE_DEGS)),t},set:function(t){this.setClockwiseConstraintDegs(t.mClockwiseConstraintDegs),this.setAnticlockwiseConstraintDegs(t.mAnticlockwiseConstraintDegs)},setClockwiseConstraintDegs:function(t){this.mClockwiseConstraintDegs=this.validateAngle(t)},setAnticlockwiseConstraintDegs:function(t){this.mAnticlockwiseConstraintDegs=this.validateAngle(t)},getClockwiseConstraintDegs:function(){return this.mClockwiseConstraintDegs},getAnticlockwiseConstraintDegs:function(){return this.mAnticlockwiseConstraintDegs}},i.prototype={constructor:i,init:function(t,n,e,i){this.setStartLocation(t),void 0!==n?(this.setEndLocation(n),this.setLength(E.distanceBetween(this.mStartLocation,this.mEndLocation))):(this.setLength(i),this.setEndLocation(this.mStartLocation.plus(e.normalised().times(i))))},clone:function(){var t=new i(this.mStartLocation,this.mEndLocation);return t.mJoint=this.mJoint.clone(),t},length:function(){return this.mLength},liveLength:function(){return E.distanceBetween(this.mStartLocation,this.mEndLocation)},setName:function(t){this.name=t},setColor:function(t){this.color=t},setBoneConnectionPoint:function(t){this.mBoneConnectionPoint=t},setHingeJointClockwiseConstraintDegs:function(t){this.mJoint.setHingeJointClockwiseConstraintDegs(t)},setHingeJointAnticlockwiseConstraintDegs:function(t){this.mJoint.setHingeJointAnticlockwiseConstraintDegs(t)},setBallJointConstraintDegs:function(t){t<0&&(t=0),180<t&&(t=180),this.mJoint.setBallJointConstraintDegs(t)},setStartLocation:function(t){this.mStartLocation.copy(t)},setEndLocation:function(t){this.mEndLocation.copy(t)},setLength:function(t){0<t&&(this.mLength=t)},setJoint:function(t){this.mJoint=t},getHingeJointClockwiseConstraintDegs:function(){return this.mJoint.getHingeClockwiseConstraintDegs()},getHingeJointAnticlockwiseConstraintDegs:function(){return this.mJoint.getHingeAnticlockwiseConstraintDegs()},getBallJointConstraintDegs:function(){return this.mJoint.getBallJointConstraintDegs()},getBoneConnectionPoint:function(){return this.mBoneConnectionPoint},getDirectionUV:function(){return E.getDirectionUV(this.mStartLocation,this.mEndLocation)},getStartLocation:function(){return this.mStartLocation},getEndLocation:function(){return this.mEndLocation},getJointType:function(){return this.mJoint.getJointType()},getLength:function(){return this.mLength},getJoint:function(){return this.mJoint}},s.prototype={constructor:s,update:function(){for(var t,n,e,i,s,o,a,r=0;r<this.mNumChains;r++){if(t=this.chains[r],n=this.meshChains[r],i=this.targets[r],-1===(s=t.getConnectedChainNumber()))t.updateTarget(i);else{20===(o=this.chains[s].getBone(t.getConnectedBoneNumber())).getBoneConnectionPoint()?t.setBaseLocation(o.getStartLocation()):t.setBaseLocation(o.getEndLocation()),a=t.getBaseboneConstraintType();var h=o.getDirectionUV();switch(a){case b:break;case 7:t.setBaseboneConstraintUV(h);break;case 8:var c=this.UP.getSignedAngleDegsTo(h),m=E.rotateDegs(thisChain.getBaseboneConstraintUV(),c);t.setBaseboneRelativeConstraintUV(m)}t.resetTarget(),t.getEmbeddedTargetMode()?t.solveForEmbeddedTarget():t.updateTarget(i)}if(this.isWithMesh)for(var u=0;u<t.mNumBones;u++)e=t.getBone(u),n[u].position.copy(e.getStartLocation()),n[u].lookAt(e.getEndLocation())}},setFixedBaseMode:function(t){this.mFixedBaseMode=t,this.chains[0].setFixedBaseMode(this.mFixedBaseMode)},clear:function(){var t;for(this.clearAllBoneMesh(),t=this.mNumChains;t--;)this.remove(t);this.chains=[],this.meshChains=[],this.targets=[]},add:function(t,n,e){this.chains.push(t),this.targets.push(n),this.mNumChains++,e&&this.addChainMeshs(t)},remove:function(t){this.chains[t].clear(),this.chains.splice(t,1),this.meshChains.splice(t,1),this.targets.splice(t,1),this.mNumChains--},getNumChains:function(){return this.mNumChains},getChain:function(t){return this.chains[t]},connectChain:function(t,n,e,i,s,o,a){if(!(n>this.mNumChains||e>this.chains[n].getNumBones())){var r,h=t.clone();void 0!==a&&h.setColor(a),h.connectToStructure(this,n,e),r="start"===(i||this.getChain(n).getBone(e).getBoneConnectionPoint())?this.chains[n].getBone(e).getStartLocation():this.chains[n].getBone(e).getEndLocation(),h.setBaseLocation(r),h.setFixedBaseMode(!0);for(var c=0;c<h.getNumBones();c++){var m=h.getBone(c).getStartLocation(),u=h.getBone(c).getEndLocation(),g=m.plus(r),l=u.plus(r);h.getBone(c).setStartLocation(g),h.getBone(c).setEndLocation(l)}this.add(h,s,o)}},addChainMeshs:function(t,n){this.isWithMesh=!0;for(var e=[],i=t.bones.length,s=0;s<i;s++)e.push(this.addBoneMesh(t.bones[s]));this.meshChains.push(e)},addBoneMesh:function(t){var n=t.mLength,e=t.color,i=new THREE.CylinderBufferGeometry(1,.5,n,4);i.applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),i.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,.5*n));var s=new THREE.MeshStandardMaterial;s.color.setHex(e);new THREE.MeshBasicMaterial({wireframe:!0});var o=new THREE.Mesh(i,s);return this.scene.add(o),o},clearAllBoneMesh:function(){if(this.isWithMesh){var t,n,e;for(t=this.meshChains.length;t--;){for(n=this.meshChains[t].length;n--;)e=this.meshChains[t][n],this.scene.remove(e),e.geometry.dispose(),e.material.dispose();this.meshChains[t]=[]}this.meshChains=[]}}},t._Math=E,t.V2=a,t.V3=r,t.M3=v,t.Joint=c,t.Bone=m,t.Chain=n,t.Structure=e,t.Joint2D=u,t.Bone2D=i,t.Structure2D=s,t.REVISION="1.3.3",t.J_BALL=p,t.J_GLOBAL_HINGE=w,t.J_LOCAL_HINGE=D,t.BB_NONE=b,t.BB_GLOBAL_ROTOR=2,t.BB_GLOBAL_HINGE=3,t.BB_LOCAL_ROTOR=4,t.BB_LOCAL_HINGE=5,t.BB_GLOBAL_ABSOLUTE=6,t.BB_LOCAL_RELATIVE=7,t.BB_LOCAL_ABSOLUTE=8,t.START=20,t.END=h,Object.defineProperty(t,"__esModule",{value:!0})});
