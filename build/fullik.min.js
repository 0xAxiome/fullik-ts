!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Fullik={})}(this,function(t){"use strict";void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e});var o=function(t){console.error(t)};function r(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function a(t,e){this.x=t||0,this.y=e||0}function v(t,e,n,i,s,o,a,r,h){this.m00=t||1,this.m01=e||0,this.m02=n||0,this.m10=i||0,this.m11=s||1,this.m12=o||0,this.m20=a||0,this.m21=r||0,this.m22=h||1}Object.assign(r.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t||0,this.y=e||0,this.z=n||0,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return this.multiplyScalar(1/t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length()||1)},normalised:function(){return new r(this.x,this.y,this.z).normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},plus:function(t){return new r(this.x+t.x,this.y+t.y,this.z+t.z)},min:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},minus:function(t){return new r(this.x-t.x,this.y-t.y,this.z-t.z)},divideBy:function(t){return new r(this.x/t,this.y/t,this.z/t)},times:function(t){return t.isVector3?new r(this.x*t.x,this.y*t.y,this.z*t.z):new r(this.x*t,this.y*t,this.z*t)},randomise:function(t,e){this.x=E.rand(t,e),this.y=E.rand(t,e),this.z=E.rand(t,e)},projectOnPlane:function(t){if(!(t.length()<=0)){var e=this.normalised(),n=t.normalised();return e.minus(n.times(E.dotProduct(e,t))).normalize()}o("Plane normal cannot be a zero vector.")},cross:function(t){return new r(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},negated:function(){return new r(-this.x,-this.y,-this.z)},clone:function(){return new r(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},approximatelyEquals:function(t,e){if(!(e<0)){var n=Math.abs(this.x-t.x),i=Math.abs(this.y-t.y),s=Math.abs(this.z-t.z);return n<e&&i<e&&s<e}},zero:function(){return this.x=0,this.y=0,this.z=0,this}}),Object.assign(a.prototype,{isVector2:!0,set:function(t,e){return this.x=t||0,this.y=e||0,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return this.multiplyScalar(1/t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length()||1)},normalised:function(){return new a(this.x,this.y).normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},plus:function(t){return new a(this.x+t.x,this.y+t.y)},min:function(t){return this.x-=t.x,this.y-=t.y,this},minus:function(t){return new a(this.x-t.x,this.y-t.y)},divideBy:function(t){return new a(this.x/t,this.y/t)},times:function(t){return new a(this.x*t,this.y*t)},randomise:function(t,e){this.x=E.rand(t,e),this.y=E.rand(t,e)},projectOnPlane:function(t){if(!(t.length()<=0)){var e=this.normalised(),n=t.normalised();return e.minus(n.times(E.dotProduct(e,t))).normalize()}o("Plane normal cannot be a zero vector.")},dot:function(t,e){return this.x*t.x+this.y*t.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},negated:function(){return new this.constructor(-this.x,-this.y)},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},approximatelyEquals:function(t,e){if(!(e<0)){var n=Math.abs(this.x-t.x),i=Math.abs(this.y-t.y);return n<e&&i<e}},getSignedAngleDegsTo:function(t){var e=this.normalised(),n=t.normalised(),i=Math.acos(e.dot(n))*E.toDeg;return 1===E.zcross(e,n)?i:-i}}),Object.assign(v.prototype,{isMatrix3:!0,setV3:function(t,e,n){return this.m00=t.x,this.m01=t.y,this.m02=t.z,this.m10=e.x,this.m11=e.y,this.m12=e.z,this.m20=n.x,this.m21=n.y,this.m22=n.z,this},transpose:function(t){return new v(t.m00,t.m10,t.m20,t.m01,t.m11,t.m21,t.m02,t.m12,t.m22)},zero:function(){return this.m00=this.m01=this.m02=this.m10=this.m11=this.m12=this.m20=this.m21=this.m22=0,this},setIdentity:function(){return this.m00=this.m11=this.m22=1,this.m01=this.m02=this.m10=this.m12=this.m20=this.m21=0,this},determinant:function(){return this.m20*this.m01*this.m12-this.m20*this.m02*this.m11-this.m10*this.m01*this.m22+this.m10*this.m02*this.m21+this.m00*this.m11*this.m22-this.m00*this.m12*this.m21},times:function(t){if(t.isVector3)return new r(this.m00*t.x+this.m10*t.y+this.m20*t.z,this.m01*t.x+this.m11*t.y+this.m21*t.z,this.m02*t.x+this.m12*t.y+this.m22*t.z);if(t.isMatrix3){var e=new v;return e.m00=this.m00*t.m00+this.m10*t.m01+this.m20*t.m02,e.m01=this.m01*t.m00+this.m11*t.m01+this.m21*t.m02,e.m02=this.m02*t.m00+this.m12*t.m01+this.m22*t.m02,e.m10=this.m00*t.m10+this.m10*t.m11+this.m20*t.m12,e.m11=this.m01*t.m10+this.m11*t.m11+this.m21*t.m12,e.m12=this.m02*t.m10+this.m12*t.m11+this.m22*t.m12,e.m20=this.m00*t.m20+this.m10*t.m21+this.m20*t.m22,e.m21=this.m01*t.m20+this.m11*t.m21+this.m21*t.m22,e.m22=this.m02*t.m20+this.m12*t.m21+this.m22*t.m22,e}},isOrthogonal:function(){var t=E.dotProduct(this.getXBasis(),this.getYBasis()),e=E.dotProduct(this.getXBasis(),this.getZBasis()),n=E.dotProduct(this.getYBasis(),this.getZBasis());return!!(E.nearEquals(t,0,.01)&&E.nearEquals(e,0,.01)&&E.nearEquals(n,0,.01))},inverse:function(t){var e=1/t.determinant(),n=new v;return n.m00=(t.m11*t.m22-t.m12*t.m21)*e,n.m01=-(t.m01*t.m22-t.m02*t.m21)*e,n.m02=(t.m01*t.m12-t.m02*t.m11)*e,n.m10=-(-t.m20*t.m12+t.m10*t.m22)*e,n.m11=(-t.m20*t.m02+t.m00*t.m22)*e,n.m12=-(-t.m10*t.m02+t.m00*t.m12)*e,n.m20=(-t.m20*t.m11+t.m10*t.m21)*e,n.m21=-(-t.m20*t.m01+t.m00*t.m21)*e,n.m22=(-t.m10*t.m02+t.m00*t.m11)*e,n},rotateRads:function(t,e){var n=new v,i=Math.sin(e),s=Math.cos(e),o=1-s,a=t.x*t.y,r=t.y*t.z,h=t.x*t.z,c=t.x*i,m=t.y*i,u=t.z*i,g=t.x*t.x*o+s,l=a*o+u,f=h*o-m,d=a*o-u,C=t.y*t.y*o+s,B=r*o+c,L=h*o+m,y=r*o-c,x=t.z*t.z*o+s,A=this.m00*g+this.m10*l+this.m20*f,E=this.m01*g+this.m11*l+this.m21*f,p=this.m02*g+this.m12*l+this.m22*f,w=this.m00*d+this.m10*C+this.m20*B,D=this.m01*d+this.m11*C+this.m21*B,b=this.m02*d+this.m12*C+this.m22*B;return n.m20=this.m00*L+this.m10*y+this.m20*x,n.m21=this.m01*L+this.m11*y+this.m21*x,n.m22=this.m02*L+this.m12*y+this.m22*x,n.m00=A,n.m01=E,n.m02=p,n.m10=w,n.m11=D,n.m12=b,n},rotateDegs:function(t,e){return this.rotateRads(e,t*E.toRad)},setXBasis:function(t){this.m00=t.x,this.m01=t.y,this.m02=t.z},setYBasis:function(t){this.m10=t.x,this.m11=t.y,this.m12=t.z},setZBasis:function(t){this.m20=t.x,this.m21=t.y,this.m22=t.z},getXBasis:function(){return new r(this.m00,this.m01,this.m02)},getYBasis:function(){return new r(this.m10,this.m11,this.m12)},getZBasis:function(){return new r(this.m20,this.m21,this.m22)}});var E={MIN_ANGLE_DEGS:0,MAX_ANGLE_DEGS:180,MAX_VALUE:1/0,PRECISION:.001,PRECISION_DEG:.01,toRad:Math.PI/180,toDeg:180/Math.PI,clamp:function(t,e,n){return t=n<(t=t<e?e:t)?n:t},lerp:function(t,e,n){return(1-n)*t+n*e},rand:function(t,e){return t+Math.random()*(e-t)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},nearEquals:function(t,e,n){return Math.abs(t-e)<=n},sign:function(t){return 0<=t?1:-1},radtodeg:function(t){return t*E.toDeg},degtorad:function(t){return t*E.toRad},cot:function(t){return 1/Math.tan(t)},perpendicular:function(t,e){return!!E.nearEquals(E.dotProduct(t,e),0,.01)},scalarProduct:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},crossProduct:function(t,e){return new r(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},genPerpendicularVectorQuick:function(t){return(Math.abs(t.y)<.99?new r(-t.z,0,t.x):new r(0,t.z,-t.y)).normalize()},genPerpendicularVectorHM:function(t){var e=E.absV3(t);return e.x<=e.y&&e.x<=e.z?new r(0,-t.z,t.y).normalize():e.y<=e.x&&e.y<=e.z?new r(-t.z,0,t.x).normalize():new r(-t.y,t.x,0).normalize()},genPerpendicularVectorFrisvad:function(t){if(t.z<-.9999999)return new r(0,-1,0);var e=1/(1+t.z);return new r(1-t.x*t.x*e,-t.x*t.y*e,-t.x).normalize()},getUvBetween:function(t,e){return(new r).copy(e.minus(t)).normalize()},absV3:function(t){return new r(t.x<0?-t.x:t.x,t.y<0?-t.y:t.y,t.z<0?-t.z:t.z)},dotProduct:function(t,e){var n=t.normalised(),i=e.normalised();return n.x*i.x+n.y*i.y+n.z*i.z},getAngleBetweenRads:function(t,e){return Math.acos(E.dotProduct(t,e))},getAngleBetweenDegs:function(t,e){return E.getAngleBetweenRads(t,e)*E.toDeg},getSignedAngleBetweenDegs:function(t,e,n){return E.getAngleBetweenDegs(t,e)*E.sign(E.dotProduct(E.crossProduct(t,e),n))},getDirectionUV:function(t,e){return e.minus(t).normalize()},rotateAboutAxisDegs:function(t,e,n){return E.rotateAboutAxisRads(t,e*E.toRad,n)},rotateAboutAxisRads:function(t,e,n){var i=new v,s=Math.sin(e),o=Math.cos(e),a=1-o,r=n.x*n.y*a,h=n.x*n.z*a,c=n.y*n.z*a;return i.m00=n.x*n.x*a+o,i.m01=r+n.z*s,i.m02=h-n.y*s,i.m10=r-n.z*s,i.m11=n.y*n.y*a+o,i.m12=c+n.x*s,i.m20=h+n.y*s,i.m21=c-n.x*s,i.m22=n.z*n.z*a+o,i.times(t)},rotateXDegs:function(t,e){return E.rotateXRads(t,e*E.toRad)},rotateYDegs:function(t,e){return E.rotateYRads(t,e*E.toRad)},rotateZDegs:function(t,e){return E.rotateZRads(t,e*E.toRad)},rotateXRads:function(t,e){var n=Math.cos(e),i=Math.sin(e);return new r(t.x,t.y*n-t.z*i,t.y*i+t.z*n)},rotateYRads:function(t,e){var n=Math.cos(e),i=Math.sin(e);return new r(t.z*i+t.x*n,t.y,t.z*n-t.x*i)},rotateZRads:function(t,e){var n=Math.cos(e),i=Math.sin(e);return new r(t.x*n-t.y*i,t.x*i+t.y*n,t.z)},getAngleLimitedUnitVectorDegs:function(t,e,n){if(n<E.getAngleBetweenDegs(e,t)){var i=E.crossProduct(e.normalised(),t.normalised()).normalize();return E.rotateAboutAxisDegs(e,n,i).normalize()}return t.normalised()},withinManhattanDistance:function(t,e,n){return!(Math.abs(e.x-t.x)>n)&&(!(Math.abs(e.y-t.y)>n)&&!(Math.abs(e.z-t.z)>n))},manhattanDistanceBetween:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.x-t.x)+Math.abs(e.x-t.x)},distanceBetween:function(t,e){var n=e.x-t.x,i=e.y-t.y,s=void 0!==t.z?e.z-t.z:0;return Math.sqrt(n*n+i*i+s*s)},createRotationMatrix:function(t){var e,n,i=t.normalised();if(t.z<-.9999999)e=new r(1,0,0),n=new r(0,1,0);else{var s=1/(1+i.z),o=-i.x*i.y*s;e=new r(1-i.x*i.x*s,o,-i.x).normalize(),n=new r(o,1-i.y*i.y*s,-i.y).normalize()}var a=new v;return a.setV3(e,n,i),a},getUnsignedAngleBetweenVectorsDegs:function(t,e){Math.acos(t.normalised().dot(e.normalised())),this.toDeg},zcross:function(t,e){var n=t.x*e.y-e.x*t.y;return 0<n?1:n<0?-1:0},getConstrainedUV:function(t,e,n,i){var s=e.getSignedAngleDegsTo(t);return i<s?this.rotateDegs(e,i):s<-n?this.rotateDegs(e,-n):t},rotateRads:function(t,e){var n=Math.cos(e),i=Math.sin(e);return new a(t.x*n-t.y*i,t.x*i+t.y*n)},rotateDegs:function(t,e){return this.rotateRads(t,e*this.toRad)},validateDirectionUV:function(t){if(t.length()<0)throw new Error("vector direction unit vector cannot be zero.")},validateLength:function(t){if(t<0)throw new Error("Length must be a greater than or equal to zero.")}},p=10,w=11,D=12,b=1,h=21;function u(){this.mRotorConstraintDegs=E.MAX_ANGLE_DEGS,this.mHingeClockwiseConstraintDegs=E.MAX_ANGLE_DEGS,this.mHingeAnticlockwiseConstraintDegs=E.MAX_ANGLE_DEGS,this.mRotationAxisUV=new r,this.mReferenceAxisUV=new r,this.type=p}function g(t,e,n,i,s){this.mJoint=new u,this.mStartLocation=new r,this.mEndLocation=new r,this.mBoneConnectionPoint="end",this.mLength=0,this.color=s||16777215,this.name="",this.init(t,e,n,i)}function e(t){this.bones=[],this.name="",this.color=t||16777215,this.mSolveDistanceThreshold=1,this.mMaxIterationAttempts=20,this.mMinIterationChange=.01,this.mChainLength=0,this.bonesLength=0,this.mNumBones=0,this.mFixedBaseLocation=new r,this.mFixedBaseMode=!0,this.mBaseboneConstraintType=b,this.mBaseboneConstraintUV=new r,this.mBaseboneRelativeConstraintUV=new r,this.mBaseboneRelativeReferenceConstraintUV=new r,this.mLastTargetLocation=new r(E.MAX_VALUE,E.MAX_VALUE,E.MAX_VALUE),this.mLastBaseLocation=new r(E.MAX_VALUE,E.MAX_VALUE,E.MAX_VALUE),this.mCurrentSolveDistance=E.MAX_VALUE,this.mConnectedChainNumber=-1,this.mConnectedBoneNumber=-1,this.mEmbeddedTarget=new r,this.mUseEmbeddedTarget=!1}function n(t){this.chains=[],this.meshChains=[],this.targets=[],this.mNumChains=0,this.scene=t,this.isWithMesh=!1}function c(t,e){this.mClockwiseConstraintDegs=t||E.MAX_ANGLE_DEGS,this.mAnticlockwiseConstraintDegs=e||E.MAX_ANGLE_DEGS}function i(t,e,n,i,s){this.mJoint=new c,this.mStartLocation=new a,this.mEndLocation=new a,this.mBoneConnectionPoint=h,this.mLength=0,this.color=s||16777215,this.name="",this.init(t,e,n,i)}function s(t){this.UP=new a(0,1),this.mFixedBaseMode=!0,this.chains=[],this.meshChains=[],this.targets=[],this.mNumChains=0,this.scene=t,this.isWithMesh=!1}u.prototype={constructor:u,clone:function(){var t=new u;return t.mRotorConstraintDegs=this.mRotorConstraintDegs,t.mHingeClockwiseConstraintDegs=this.mHingeClockwiseConstraintDegs,t.mHingeAnticlockwiseConstraintDegs=this.mHingeAnticlockwiseConstraintDegs,t.type=this.type,t.mRotationAxisUV.copy(this.mRotationAxisUV),t.mReferenceAxisUV.copy(this.mReferenceAxisUV),t},validateAngle:function(t){return t<E.MIN_ANGLE_DEGS&&(t=E.MIN_ANGLE_DEGS,console.log("! min angle is "+E.MIN_ANGLE_DEGS)),t>E.MAX_ANGLE_DEGS&&(t=E.MAX_ANGLE_DEGS,console.log("! max angle is "+E.MAX_ANGLE_DEGS)),t},setAsBallJoint:function(t){this.mRotorConstraintDegs=this.validateAngle(t),this.type=p},setHinge:function(t,e,n,i,s){this.type=t,this.mHingeClockwiseConstraintDegs=this.validateAngle(n),this.mHingeAnticlockwiseConstraintDegs=this.validateAngle(i),this.mRotationAxisUV.copy(e.normalised()),this.mReferenceAxisUV.copy(s.normalised())},getJointType:function(){return this.type},getHingeClockwiseConstraintDegs:function(){if(this.type!==p)return this.mHingeClockwiseConstraintDegs},getHingeAnticlockwiseConstraintDegs:function(){if(this.type!==p)return this.mHingeAnticlockwiseConstraintDegs},getHingeReferenceAxis:function(){if(this.type!==p)return this.mReferenceAxisUV},getHingeRotationAxis:function(){if(this.type!==p)return this.mRotationAxisUV},getBallJointConstraintDegs:function(){if(this.type===p)return this.mRotorConstraintDegs},setAsGlobalHinge:function(t,e,n,i){this.setHinge(w,t,e,n,i)},setAsLocalHinge:function(t,e,n,i){this.setHinge(D,t,e,n,i)},setBallJointConstraintDegs:function(t){this.type===p&&(this.mRotorConstraintDegs=this.validateAngle(t))},setHingeJointClockwiseConstraintDegs:function(t){this.type!==p&&(this.mHingeClockwiseConstraintDegs=this.validateAngle(t))},setHingeJointAnticlockwiseConstraintDegs:function(t){this.type!==p&&(this.mHingeAnticlockwiseConstraintDegs=this.validateAngle(t))},setHingeRotationAxis:function(t){this.type!==p&&this.mRotationAxisUV.copy(t.normalised())},setHingeReferenceAxis:function(t){this.type!==p&&this.mReferenceAxisUV.copy(t.normalised())}},g.prototype={constructor:g,init:function(t,e,n,i){this.setStartLocation(t),void 0!==e?(this.setEndLocation(e),this.setLength(E.distanceBetween(this.mStartLocation,this.mEndLocation))):(this.setLength(i),this.setEndLocation(this.mStartLocation.plus(n.normalised().times(i))))},clone:function(){var t=new g(this.mStartLocation,this.mEndLocation);return t.mJoint=this.mJoint.clone(),t},length:function(){return this.mLength},liveLength:function(){return E.distanceBetween(this.mStartLocation,this.mEndLocation)},setName:function(t){this.name=t},setColor:function(t){this.color=t},setBoneConnectionPoint:function(t){this.mBoneConnectionPoint=t},setHingeJointClockwiseConstraintDegs:function(t){this.mJoint.setHingeJointClockwiseConstraintDegs(t)},setHingeJointAnticlockwiseConstraintDegs:function(t){this.mJoint.setHingeJointAnticlockwiseConstraintDegs(t)},setBallJointConstraintDegs:function(t){t<0&&(t=0),180<t&&(t=180),this.mJoint.setBallJointConstraintDegs(t)},setStartLocation:function(t){this.mStartLocation.copy(t)},setEndLocation:function(t){this.mEndLocation.copy(t)},setLength:function(t){0<t&&(this.mLength=t)},setJoint:function(t){this.mJoint=t},getHingeJointClockwiseConstraintDegs:function(){return this.mJoint.getHingeClockwiseConstraintDegs()},getHingeJointAnticlockwiseConstraintDegs:function(){return this.mJoint.getHingeAnticlockwiseConstraintDegs()},getBallJointConstraintDegs:function(){return this.mJoint.getBallJointConstraintDegs()},getBoneConnectionPoint:function(){return this.mBoneConnectionPoint},getDirectionUV:function(){return E.getDirectionUV(this.mStartLocation,this.mEndLocation)},getStartLocation:function(){return this.mStartLocation},getEndLocation:function(){return this.mEndLocation},getJointType:function(){return this.mJoint.getJointType()},getLength:function(){return this.mLength},getJoint:function(){return this.mJoint}},e.prototype={constructor:e,clone:function(){var t=new e;return t.bones=this.cloneIkChain(),t.mFixedBaseLocation.copy(this.mFixedBaseLocation),t.mLastTargetLocation.copy(this.mLastTargetLocation),t.mLastBaseLocation.copy(this.mLastBaseLocation),this.mBaseboneConstraintType!==b&&(t.mBaseboneConstraintUV.copy(this.mBaseboneConstraintUV),t.mBaseboneRelativeConstraintUV.copy(this.mBaseboneRelativeConstraintUV)),t.bonesLength=this.bonesLength,t.mNumBones=this.mNumBones,t.mCurrentSolveDistance=this.mCurrentSolveDistance,t.mConnectedChainNumber=this.mConnectedChainNumber,t.mConnectedBoneNumber=this.mConnectedBoneNumber,t.mBaseboneConstraintType=this.mBaseboneConstraintType,t.color=this.color,t},clear:function(){for(var t=this.mNumBones;t--;)this.removeBone(t);this.mNumBones=0},addBone:function(t){t.setColor(this.color),this.bones.push(t),this.mNumBones++,1===this.mNumBones&&(this.mFixedBaseLocation.copy(t.getStartLocation()),this.mBaseboneConstraintUV.copy(t.getDirectionUV())),this.updateChainLength()},removeBone:function(t){t<this.mNumBones&&(this.bones.splice(t,1),this.mNumBones--,this.updateChainLength())},addConsecutiveBone:function(t,e){if(0<this.mNumBones){var n=this.bones[this.mNumBones-1].getEndLocation();this.addBone(new g(n,void 0,t.normalised(),e))}},addConsecutiveFreelyRotatingHingedBone:function(t,e,n,i){this.addConsecutiveHingedBone(t,e,n,i,180,180,E.genPerpendicularVectorQuick(i))},addConsecutiveHingedBone:function(t,e,n,i,s,o,a){if(0!==this.mNumBones){var r=t.normalised(),h=i.normalised(),c=new g(this.bones[this.mNumBones-1].getEndLocation().clone(),void 0,r,e,this.color);n=n||"global";var m=new u;switch(n){case"global":m.setAsGlobalHinge(h,s,o,a);break;case"local":m.setAsLocalHinge(h,s,o,a)}c.setJoint(m),this.addBone(c)}},addConsecutiveRotorConstrainedBone:function(t,e,n){if(0!==this.mNumBones){t=t.normalised();var i=new g(this.bones[this.mNumBones-1].getEndLocation(),void 0,t,e);i.setBallJointConstraintDegs(n),this.addBone(i)}},connectToStructure:function(t,e,n){t.getNumChains()<e||(t.getChain(e).getNumBones()<n||(this.mConnectedChainNumber=e,this.mConnectedBoneNumber=n))},getBaseboneConstraintType:function(){return this.mBaseboneConstraintType},getBaseboneConstraintUV:function(){if(this.mBaseboneConstraintType!==b)return this.mBaseboneConstraintUV},getBaseLocation:function(){return this.bones[0].getStartLocation()},getBone:function(t){return this.bones[t]},getChain:function(){return this.bones},getChainLength:function(){return this.bonesLength},getConnectedBoneNumber:function(){return this.mConnectedBoneNumber},getConnectedChainNumber:function(){return this.mConnectedChainNumber},getEffectorLocation:function(){return this.bones[this.mNumBones-1].getEndLocation()},getLastTargetLocation:function(){return this.mLastTargetLocation},getLiveChainLength:function(){for(var t=0,e=0;e<this.mNumBones;e++)t+=this.bones[e].liveLength();return t},getName:function(){return this.name},getNumBones:function(){return this.mNumBones},getBaseboneRelativeReferenceConstraintUV:function(){return this.mBaseboneRelativeReferenceConstraintUV},setColor:function(t){this.color=t;for(var e=0;e<this.mNumBones;e++)this.bones[e].setColor(t)},setBaseboneRelativeConstraintUV:function(t){this.mBaseboneRelativeConstraintUV=t},setBaseboneRelativeReferenceConstraintUV:function(t){this.mBaseboneRelativeReferenceConstraintUV=t},setRotorBaseboneConstraint:function(t,e,n){0!==this.mNumBones&&0<e.length()&&(E.clamp(n,0,180),t=t||"global",this.mBaseboneConstraintType="global"===t?2:4,this.mBaseboneConstraintUV=e.normalised(),this.mBaseboneRelativeConstraintUV.copy(this.mBaseboneConstraintUV),this.getBone(0).getJoint().setAsBallJoint(n))},setHingeBaseboneConstraint:function(t,e,n,i,s){0===this.mNumBones&&o("Chain must contain a basebone before we can specify the basebone constraint type.")},setFreelyRotatingGlobalHingedBasebone:function(t){this.setHingeBaseboneConstraint(3,t,180,180,E.genPerpendicularVectorQuick(t))},setFreelyRotatingLocalHingedBasebone:function(t){this.setHingeBaseboneConstraint(5,t,180,180,E.genPerpendicularVectorQuick(t))},setLocalHingedBasebone:function(t,e,n,i){this.setHingeBaseboneConstraint(5,t,e,n,i)},setGlobalHingedBasebone:function(t,e,n,i){this.setHingeBaseboneConstraint(3,t,e,n,i)},setBaseboneConstraintUV:function(t){this.mBaseboneConstraintType!==b&&(this.constraintUV.normalize(),this.mBaseboneConstraintUV.copy(t))},setBaseLocation:function(t){this.mFixedBaseLocation.copy(t)},setChain:function(t){this.bones=[];for(var e=t.length,n=0;n<e;n++)this.bones[n]=t[n]},setFixedBaseMode:function(t){(t||-1===this.mConnectedChainNumber)&&(2!==this.mBaseboneConstraintType||t)&&(this.mFixedBaseMode=t)},setMaxIterationAttempts:function(t){t<1||(this.mMaxIterationAttempts=t)},setMinIterationChange:function(t){t<0||(this.mMinIterationChange=t)},setSolveDistanceThreshold:function(t){t<0||(this.mSolveDistanceThreshold=t)},resetTarget:function(){this.mLastBaseLocation=new r(E.MAX_VALUE,E.MAX_VALUE,E.MAX_VALUE),this.mCurrentSolveDistance=E.MAX_VALUE},updateTarget:function(t){var e=new r(t.x,t.y,t.z);if(this.mLastTargetLocation.approximatelyEquals(e,.001)&&this.mLastBaseLocation.approximatelyEquals(this.getBaseLocation(),.001))return this.mCurrentSolveDistance;for(var n,i=[],s=E.MAX_VALUE,o=E.MAX_VALUE,a=0;a<this.mMaxIterationAttempts;a++){if((n=this.solveIK(e))<s){if(s=n,i=this.cloneIkChain(),n<=this.mSolveDistanceThreshold)break}else if(Math.abs(n-o)<this.mMinIterationChange)break;o=n}return this.mCurrentSolveDistance=s,this.bones=i,this.mLastBaseLocation.copy(this.getBaseLocation()),this.mLastTargetLocation.copy(e),this.mCurrentSolveDistance},solveIK:function(t){if(0!==this.mNumBones){for(var e,n,i,s,o=this.mNumBones;o--;)if(n=(e=this.bones[o]).getLength(),i=e.getJoint(),s=e.getJointType(),o!==this.mNumBones-1){var a=this.bones[o+1].getDirectionUV().negated(),r=e.getDirectionUV().negated();if(s===p){var h=E.getAngleBetweenDegs(a,r);(x=i.getBallJointConstraintDegs())<h&&(r=E.getAngleLimitedUnitVectorDegs(r,a,x))}else if(s===w)r=r.projectOnPlane(i.getHingeRotationAxis());else if(s===D){m=0<o?(B=E.createRotationMatrix(this.bones[o-1].getDirectionUV())).times(i.getHingeRotationAxis()).normalize():this.mBaseboneRelativeConstraintUV.clone(),r=r.projectOnPlane(m)}var c=e.getEndLocation().plus(r.times(n));e.setStartLocation(c),0<o&&this.bones[o-1].setEndLocation(c)}else{e.setEndLocation(t);r=e.getDirectionUV().negated();switch(s){case p:break;case w:r=r.projectOnPlane(i.getHingeRotationAxis());break;case D:var m=(B=E.createRotationMatrix(this.bones[o-1].getDirectionUV())).times(i.getHingeRotationAxis()).normalize();r=r.projectOnPlane(m)}c=t.plus(r.times(n));e.setStartLocation(c),0<o&&this.bones[o-1].setEndLocation(c)}for(o=0;o<this.mNumBones;o++)if(n=(e=this.bones[o]).getLength(),0!==o){var u=e.getDirectionUV(),g=this.bones[o-1].getDirectionUV();if((s=(i=e.getJoint()).getJointType())===p){h=E.getAngleBetweenDegs(g,u);(x=i.getBallJointConstraintDegs())<h&&(u=E.getAngleLimitedUnitVectorDegs(u,g,x))}else if(s===w){var l=i.getHingeRotationAxis();u=u.projectOnPlane(l).normalize();var f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs();if(!E.nearEquals(f,-E.MAX_ANGLE_DEGS,E.PRECISION)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION)){var C=i.getHingeReferenceAxis();d<(A=E.getSignedAngleBetweenDegs(C,u,l))?u=E.rotateAboutAxisDegs(C,d,l).normalised():A<f&&(u=E.rotateAboutAxisDegs(C,f,l).normalised())}}else if(s===D){var B;l=i.getHingeRotationAxis(),m=(B=E.createRotationMatrix(g)).times(l).normalize();u=u.projectOnPlane(m);f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs();if(!E.nearEquals(f,-E.MAX_ANGLE_DEGS,E.PRECISION)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION)){var L=B.times(i.getHingeReferenceAxis()).normalize();d<(A=E.getSignedAngleBetweenDegs(L,u,m))?u=E.rotateAboutAxisDegs(L,d,m).normalize():A<f&&(u=E.rotateAboutAxisDegs(L,f,m).normalize())}}var y=e.getStartLocation().plus(u.times(n));e.setEndLocation(y),o<this.mNumBones-1&&this.bones[o+1].setStartLocation(y)}else if(this.mFixedBaseMode?e.setStartLocation(this.mFixedBaseLocation):e.setStartLocation(e.getEndLocation().minus(e.getDirectionUV().times(n))),this.mBaseboneConstraintType===b){y=e.getStartLocation().plus(e.getDirectionUV().times(n));e.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(2===this.mBaseboneConstraintType){u=e.getDirectionUV(),h=E.getAngleBetweenDegs(this.mBaseboneConstraintUV,u);(x=e.getBallJointConstraintDegs())<h&&(u=E.getAngleLimitedUnitVectorDegs(u,this.mBaseboneConstraintUV,x));y=e.getStartLocation().plus(u.times(n));e.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(4===this.mBaseboneConstraintType){var x;u=e.getDirectionUV(),h=E.getAngleBetweenDegs(this.mBaseboneRelativeConstraintUV,u);(x=e.getBallJointConstraintDegs())<h&&(u=E.getAngleLimitedUnitVectorDegs(u,this.mBaseboneRelativeConstraintUV,x));y=e.getStartLocation().plus(u.times(n));e.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(3===this.mBaseboneConstraintType){l=(i=e.getJoint()).getHingeRotationAxis(),f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs(),u=e.getDirectionUV().projectOnPlane(l).normalize();if(!E.nearEquals(f,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)){C=i.getHingeReferenceAxis();d<(A=E.getSignedAngleBetweenDegs(C,u,l))?u=E.rotateAboutAxisDegs(C,d,l).normalize():A<f&&(u=E.rotateAboutAxisDegs(C,f,l).normalize())}y=e.getStartLocation().plus(u.times(n));e.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}else if(5===this.mBaseboneConstraintType){i=e.getJoint();l=this.mBaseboneRelativeConstraintUV,f=-i.getHingeClockwiseConstraintDegs(),d=i.getHingeAnticlockwiseConstraintDegs(),u=e.getDirectionUV().projectOnPlane(l);if(!E.nearEquals(f,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)&&!E.nearEquals(d,E.MAX_ANGLE_DEGS,E.PRECISION_DEG)){var A;C=this.mBaseboneRelativeReferenceConstraintUV;d<(A=E.getSignedAngleBetweenDegs(C,u,l))?u=E.rotateAboutAxisDegs(C,d,l).normalize():A<f&&(u=E.rotateAboutAxisDegs(C,f,l).normalize())}y=e.getStartLocation().plus(u.times(n));e.setEndLocation(y),1<this.mNumBones&&this.bones[1].setStartLocation(y)}return this.mLastTargetLocation.copy(t),E.distanceBetween(this.bones[this.mNumBones-1].getEndLocation(),t)}},updateChainLength:function(){this.bonesLength=0;for(var t=this.mNumBones;t--;)this.bonesLength+=this.bones[t].getLength()},cloneIkChain:function(){for(var t=this.bones.length,e=[],n=0;n<t;n++)e.push(this.bones[n].clone());return e}},n.prototype={constructor:n,update:function(){for(var t,e,n,i,s,o,a,r=0;r<this.mNumChains;r++){if(t=this.chains[r],e=this.meshChains[r],i=this.targets[r],-1===(s=t.getConnectedChainNumber()))t.updateTarget(i);else{switch(o=this.chains[s].getBone(t.getConnectedBoneNumber()),t.setBaseLocation("start"===o.getBoneConnectionPoint()?o.getStartLocation():o.getEndLocation()),a=t.getBaseboneConstraintType()){case b:case 2:case 3:break;case 4:case 5:var h=E.createRotationMatrix(o.getDirectionUV()),c=h.times(t.getBaseboneConstraintUV()).normalize();t.setBaseboneRelativeConstraintUV(c),5===a&&t.setBaseboneRelativeReferenceConstraintUV(h.times(t.getBone(0).getJoint().getHingeReferenceAxis()))}t.resetTarget(),t.updateTarget(i)}if(this.isWithMesh)for(var m=0;m<t.mNumBones;m++)n=t.getBone(m),e[m].position.copy(n.getStartLocation()),e[m].lookAt(n.getEndLocation())}},clear:function(){var t;for(this.clearAllBoneMesh(),t=this.mNumChains;t--;)this.remove(t);this.chains=[],this.meshChains=[],this.targets=[]},add:function(t,e,n){this.chains.push(t),this.targets.push(e),this.mNumChains++,n&&this.addChainMeshs(t)},remove:function(t){this.chains[t].clear(),this.chains.splice(t,1),this.meshChains.splice(t,1),this.targets.splice(t,1),this.mNumChains--},setFixedBaseMode:function(t){for(var e=0;e<this.mNumChains;e++)this.chains[e].setFixedBaseMode(t)},getNumChains:function(){return this.mNumChains},getChain:function(t){return this.chains[t]},connectChain:function(t,e,n,i,s,o,a){if(!(e>this.mNumChains||n>this.chains[e].getNumBones())){var r,h=t.clone();void 0!==a&&h.setColor(a),h.connectToStructure(this,e,n),r="start"===(i||this.getChain(e).getBone(n).getBoneConnectionPoint())?this.chains[e].getBone(n).getStartLocation():this.chains[e].getBone(n).getEndLocation(),h.setBaseLocation(r),h.setFixedBaseMode(!0);for(var c=0;c<h.getNumBones();c++){var m=h.getBone(c).getStartLocation(),u=h.getBone(c).getEndLocation(),g=m.plus(r),l=u.plus(r);h.getBone(c).setStartLocation(g),h.getBone(c).setEndLocation(l)}this.add(h,s,o)}},addChainMeshs:function(t,e){this.isWithMesh=!0;for(var n=[],i=t.bones.length,s=0;s<i;s++)n.push(this.addBoneMesh(t.bones[s]));this.meshChains.push(n)},addBoneMesh:function(t){var e=t.mLength,n=t.color,i=new THREE.CylinderBufferGeometry(1,.5,e,4);i.applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),i.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,.5*e));var s,o=new THREE.MeshStandardMaterial({color:n,wireframe:!1,shadowSide:!1,transparent:!0,opacity:.6}),a=new THREE.MeshBasicMaterial({wireframe:!0,transparent:!0,opacity:.3}),r=new THREE.MeshBasicMaterial({wireframe:!0,color:n,transparent:!0,opacity:.3}),h=null;switch(t.getJoint().type){case p:if(a.color.setHex(16737792),180===t.getJoint().mRotorConstraintDegs)break;var c=e/4,m=2;(s=new THREE.CylinderBufferGeometry(0,m,c,6)).applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),s.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,.5*c)),h=new THREE.Mesh(s,a);break;case w:var u=t.getJoint().mHingeClockwiseConstraintDegs*E.toRad,g=t.getJoint().mHingeAnticlockwiseConstraintDegs*E.toRad;m=2;a.color.setHex(16776960),(s=new THREE.CircleBufferGeometry(m,12,u,u+g)).applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),h=new THREE.Mesh(s,a);break;case D:m=2,u=t.getJoint().mHingeClockwiseConstraintDegs*E.toRad,g=t.getJoint().mHingeAnticlockwiseConstraintDegs*E.toRad;a.color.setHex(65535),(s=new THREE.CircleBufferGeometry(m,12,u,u+g)).applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),h=new THREE.Mesh(s,a)}var l=new THREE.AxesHelper(1),f=new THREE.Mesh(i,r),d=new THREE.Mesh(i,o);return d.add(l),d.add(f),this.scene.add(d),d.castShadow=!0,d.receiveShadow=!0,null!==h&&d.add(h),d},clearAllBoneMesh:function(){if(this.isWithMesh){var t,e,n;for(t=this.meshChains.length;t--;){for(e=this.meshChains[t].length;e--;)n=this.meshChains[t][e],this.scene.remove(n),n.geometry.dispose(),n.material.dispose();this.meshChains[t]=[]}this.meshChains=[]}}},c.prototype={constructor:c,clone:function(){var t=new c;return t.mClockwiseConstraintDegs=this.mClockwiseConstraintDegs,t.mAnticlockwiseConstraintDegs=this.mAnticlockwiseConstraintDegs,t},validateAngle:function(t){return t<E.MIN_ANGLE_DEGS&&(t=E.MIN_ANGLE_DEGS,console.log("! min angle is "+E.MIN_ANGLE_DEGS)),t>E.MAX_ANGLE_DEGS&&(t=E.MAX_ANGLE_DEGS,console.log("! max angle is "+E.MAX_ANGLE_DEGS)),t},set:function(t){this.setClockwiseConstraintDegs(t.mClockwiseConstraintDegs),this.setAnticlockwiseConstraintDegs(t.mAnticlockwiseConstraintDegs)},setClockwiseConstraintDegs:function(t){this.mClockwiseConstraintDegs=this.validateAngle(t)},setAnticlockwiseConstraintDegs:function(t){this.mAnticlockwiseConstraintDegs=this.validateAngle(t)},getClockwiseConstraintDegs:function(){return this.mClockwiseConstraintDegs},getAnticlockwiseConstraintDegs:function(){return this.mAnticlockwiseConstraintDegs}},i.prototype={constructor:i,init:function(t,e,n,i){this.setStartLocation(t),void 0!==e?(this.setEndLocation(e),this.setLength(E.distanceBetween(this.mStartLocation,this.mEndLocation))):(this.setLength(i),this.setEndLocation(this.mStartLocation.plus(n.normalised().times(i))))},clone:function(){var t=new i(this.mStartLocation,this.mEndLocation);return t.mJoint=this.mJoint.clone(),t},length:function(){return this.mLength},liveLength:function(){return E.distanceBetween(this.mStartLocation,this.mEndLocation)},setName:function(t){this.name=t},setColor:function(t){this.color=t},setBoneConnectionPoint:function(t){this.mBoneConnectionPoint=t},setHingeJointClockwiseConstraintDegs:function(t){this.mJoint.setHingeJointClockwiseConstraintDegs(t)},setHingeJointAnticlockwiseConstraintDegs:function(t){this.mJoint.setHingeJointAnticlockwiseConstraintDegs(t)},setBallJointConstraintDegs:function(t){t<0&&(t=0),180<t&&(t=180),this.mJoint.setBallJointConstraintDegs(t)},setStartLocation:function(t){this.mStartLocation.copy(t)},setEndLocation:function(t){this.mEndLocation.copy(t)},setLength:function(t){0<t&&(this.mLength=t)},setJoint:function(t){this.mJoint=t},getHingeJointClockwiseConstraintDegs:function(){return this.mJoint.getHingeClockwiseConstraintDegs()},getHingeJointAnticlockwiseConstraintDegs:function(){return this.mJoint.getHingeAnticlockwiseConstraintDegs()},getBallJointConstraintDegs:function(){return this.mJoint.getBallJointConstraintDegs()},getBoneConnectionPoint:function(){return this.mBoneConnectionPoint},getDirectionUV:function(){return E.getDirectionUV(this.mStartLocation,this.mEndLocation)},getStartLocation:function(){return this.mStartLocation},getEndLocation:function(){return this.mEndLocation},getJointType:function(){return this.mJoint.getJointType()},getLength:function(){return this.mLength},getJoint:function(){return this.mJoint}},s.prototype={constructor:s,update:function(){for(var t,e,n,i,s,o,a,r=0;r<this.mNumChains;r++){if(t=this.chains[r],e=this.meshChains[r],i=this.targets[r],-1===(s=t.getConnectedChainNumber()))t.updateTarget(i);else{20===(o=this.chains[s].getBone(t.getConnectedBoneNumber())).getBoneConnectionPoint()?t.setBaseLocation(o.getStartLocation()):t.setBaseLocation(o.getEndLocation()),a=t.getBaseboneConstraintType();var h=o.getDirectionUV();switch(a){case b:break;case 7:t.setBaseboneConstraintUV(h);break;case 8:var c=this.UP.getSignedAngleDegsTo(h),m=E.rotateDegs(thisChain.getBaseboneConstraintUV(),c);t.setBaseboneRelativeConstraintUV(m)}t.resetTarget(),t.getEmbeddedTargetMode()?t.solveForEmbeddedTarget():t.updateTarget(i)}if(this.isWithMesh)for(var u=0;u<t.mNumBones;u++)n=t.getBone(u),e[u].position.copy(n.getStartLocation()),e[u].lookAt(n.getEndLocation())}},setFixedBaseMode:function(t){this.mFixedBaseMode=t,this.chains[0].setFixedBaseMode(this.mFixedBaseMode)},clear:function(){var t;for(this.clearAllBoneMesh(),t=this.mNumChains;t--;)this.remove(t);this.chains=[],this.meshChains=[],this.targets=[]},add:function(t,e,n){this.chains.push(t),this.targets.push(e),this.mNumChains++,n&&this.addChainMeshs(t)},remove:function(t){this.chains[t].clear(),this.chains.splice(t,1),this.meshChains.splice(t,1),this.targets.splice(t,1),this.mNumChains--},getNumChains:function(){return this.mNumChains},getChain:function(t){return this.chains[t]},connectChain:function(t,e,n,i,s,o,a){if(!(e>this.mNumChains||n>this.chains[e].getNumBones())){var r,h=t.clone();void 0!==a&&h.setColor(a),h.connectToStructure(this,e,n),r="start"===(i||this.getChain(e).getBone(n).getBoneConnectionPoint())?this.chains[e].getBone(n).getStartLocation():this.chains[e].getBone(n).getEndLocation(),h.setBaseLocation(r),h.setFixedBaseMode(!0);for(var c=0;c<h.getNumBones();c++){var m=h.getBone(c).getStartLocation(),u=h.getBone(c).getEndLocation(),g=m.plus(r),l=u.plus(r);h.getBone(c).setStartLocation(g),h.getBone(c).setEndLocation(l)}this.add(h,s,o)}},addChainMeshs:function(t,e){this.isWithMesh=!0;for(var n=[],i=t.bones.length,s=0;s<i;s++)n.push(this.addBoneMesh(t.bones[s]));this.meshChains.push(n)},addBoneMesh:function(t){var e=t.mLength,n=t.color,i=new THREE.CylinderBufferGeometry(1,.5,e,4);i.applyMatrix((new THREE.Matrix4).makeRotationX(.5*-Math.PI)),i.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,.5*e));var s=new THREE.MeshStandardMaterial;s.color.setHex(n);new THREE.MeshBasicMaterial({wireframe:!0});var o=new THREE.Mesh(i,s);return this.scene.add(o),o},clearAllBoneMesh:function(){if(this.isWithMesh){var t,e,n;for(t=this.meshChains.length;t--;){for(e=this.meshChains[t].length;e--;)n=this.meshChains[t][e],this.scene.remove(n),n.geometry.dispose(),n.material.dispose();this.meshChains[t]=[]}this.meshChains=[]}}},t._Math=E,t.V2=a,t.V3=r,t.M3=v,t.Joint=u,t.Bone=g,t.Chain=e,t.Structure=n,t.Joint2D=c,t.Bone2D=i,t.Structure2D=s,t.REVISION="1.3.3",t.J_BALL=p,t.J_GLOBAL_HINGE=w,t.J_LOCAL_HINGE=D,t.BB_NONE=b,t.BB_GLOBAL_ROTOR=2,t.BB_GLOBAL_HINGE=3,t.BB_LOCAL_ROTOR=4,t.BB_LOCAL_HINGE=5,t.BB_GLOBAL_ABSOLUTE=6,t.BB_LOCAL_RELATIVE=7,t.BB_LOCAL_ABSOLUTE=8,t.START=20,t.END=h,Object.defineProperty(t,"__esModule",{value:!0})});
